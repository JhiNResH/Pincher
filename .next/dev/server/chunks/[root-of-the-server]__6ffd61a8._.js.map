{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/jhinresh/Desktop/pincher/lib/server-wallet.ts"],"sourcesContent":["import { createWalletClient, createPublicClient, http } from \"viem\";\nimport { privateKeyToAccount } from \"viem/accounts\";\nimport { baseSepolia } from \"viem/chains\";\n\n// Reuse the Faucet Key for the Agent (or a dedicated AGENT_PRIVATE_KEY)\nconst PRIVATE_KEY = process.env.FAUCET_PRIVATE_KEY as `0x${string}`;\n\nif (!PRIVATE_KEY) {\n  console.warn(\"⚠️ AGENT WARNING: FAUCET_PRIVATE_KEY is missing. Agent wallet will fail.\");\n}\n\n// 1. Account Setup\nlet account = null;\ntry {\n  let key = process.env.FAUCET_PRIVATE_KEY || \"\";\n  \n  // Sanitize: Remove whitespace and newlines\n  key = key.trim().replace(/[\\n\\r]/g, \"\");\n\n  console.log(\"Debug: FAUCET_PRIVATE_KEY sanitized length:\", key.length);\n\n  // Auto-fix: Prepend 0x if missing\n  if (key && !key.startsWith(\"0x\")) {\n    console.log(\"⚠️ Auto-fixing key: Prepending '0x'\");\n    key = `0x${key}`;\n  }\n\n  if (key && key.startsWith(\"0x\")) {\n    // Validate hex string format\n    if (!/^0x[0-9a-fA-F]{64}$/.test(key)) {\n       console.error(\"❌ Agent Wallet Error: Invalid Private Key format (Regex check failed). Length:\", key.length);\n       throw new Error(\"Invalid Private Key format\");\n    }\n    account = privateKeyToAccount(key as `0x${string}`);\n  } else {\n    console.warn(\"❌ Key missing or invalid format (must start with 0x)\");\n  }\n} catch (e) {\n  console.error(\"❌ Agent Wallet Error: Invalid Private Key format. Check .env.local\");\n}\nexport const agentAccount = account;\n\n// 2. Public Client (Read Blockchain)\nexport const publicClient = createPublicClient({\n  chain: baseSepolia,\n  transport: http(),\n});\n\n// 3. Wallet Client (Write/Sign Transactions)\nexport const agentWallet = agentAccount\n  ? createWalletClient({\n      account: agentAccount!,\n      chain: baseSepolia,\n      transport: http(),\n    })\n  : (null as any);\n\n// Helper: Check Agent Balance\n/**\n *\n */\nexport async function getAgentBalance() {\n  if (!agentAccount) return \"0\";\n  const balance = await publicClient.getBalance({ address: agentAccount.address });\n  // Return formatted string if needed, or keeping explicit bigint elsewhere\n  return balance;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AACA;AACA;;;;AAEA,wEAAwE;AACxE,MAAM,cAAc,QAAQ,GAAG,CAAC,kBAAkB;AAElD,IAAI,CAAC,aAAa;IAChB,QAAQ,IAAI,CAAC;AACf;AAEA,mBAAmB;AACnB,IAAI,UAAU;AACd,IAAI;IACF,IAAI,MAAM,QAAQ,GAAG,CAAC,kBAAkB,IAAI;IAE5C,2CAA2C;IAC3C,MAAM,IAAI,IAAI,GAAG,OAAO,CAAC,WAAW;IAEpC,QAAQ,GAAG,CAAC,+CAA+C,IAAI,MAAM;IAErE,kCAAkC;IAClC,IAAI,OAAO,CAAC,IAAI,UAAU,CAAC,OAAO;QAChC,QAAQ,GAAG,CAAC;QACZ,MAAM,CAAC,EAAE,EAAE,KAAK;IAClB;IAEA,IAAI,OAAO,IAAI,UAAU,CAAC,OAAO;QAC/B,6BAA6B;QAC7B,IAAI,CAAC,sBAAsB,IAAI,CAAC,MAAM;YACnC,QAAQ,KAAK,CAAC,kFAAkF,IAAI,MAAM;YAC1G,MAAM,IAAI,MAAM;QACnB;QACA,UAAU,IAAA,8MAAmB,EAAC;IAChC,OAAO;QACL,QAAQ,IAAI,CAAC;IACf;AACF,EAAE,OAAO,GAAG;IACV,QAAQ,KAAK,CAAC;AAChB;AACO,MAAM,eAAe;AAGrB,MAAM,eAAe,IAAA,2MAAkB,EAAC;IAC7C,OAAO,2MAAW;IAClB,WAAW,IAAA,6LAAI;AACjB;AAGO,MAAM,cAAc,eACvB,IAAA,2MAAkB,EAAC;IACjB,SAAS;IACT,OAAO,2MAAW;IAClB,WAAW,IAAA,6LAAI;AACjB,KACC;AAME,eAAe;IACpB,IAAI,CAAC,cAAc,OAAO;IAC1B,MAAM,UAAU,MAAM,aAAa,UAAU,CAAC;QAAE,SAAS,aAAa,OAAO;IAAC;IAC9E,0EAA0E;IAC1E,OAAO;AACT"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///Users/jhinresh/Desktop/pincher/app/api/escrow/config/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { agentAccount } from \"@/lib/server-wallet\";\n\n/**\n *\n */\nexport async function GET() {\n  if (!agentAccount) {\n    return NextResponse.json({ error: \"Agent not configured\" }, { status: 500 });\n  }\n  return NextResponse.json({ address: agentAccount.address });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAKO,eAAe;IACpB,IAAI,CAAC,+JAAY,EAAE;QACjB,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;IACA,OAAO,sKAAY,CAAC,IAAI,CAAC;QAAE,SAAS,+JAAY,CAAC,OAAO;IAAC;AAC3D"}}]
}