{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/jhinresh/Desktop/pincher/app/api/faucet/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { createWalletClient, http, parseEther, publicActions, parseUnits } from \"viem\";\nimport { privateKeyToAccount } from \"viem/accounts\";\nimport { baseSepolia } from \"viem/chains\";\n\nconst USDC_ADDRESS = '0x036CbD53842c5426634e7929541eC2318f3dCF7e';\nconst ERC20_ABI = [\n  {\n    inputs: [\n      { name: 'to', type: 'address' },\n      { name: 'amount', type: 'uint256' },\n    ],\n    name: 'transfer',\n    outputs: [{ name: '', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n] as const;\n\nexport async function POST(req: Request) {\n  try {\n    const { address } = await req.json();\n\n    if (!address) {\n      return NextResponse.json({ error: \"Address is required\" }, { status: 400 });\n    }\n\n    const pKey = process.env.FAUCET_PRIVATE_KEY;\n    if (!pKey) {\n      console.error(\"FAUCET_PRIVATE_KEY not set\");\n      return NextResponse.json({ error: \"Faucet configuration error\" }, { status: 500 });\n    }\n\n    // Setup Wallet Client\n    const account = privateKeyToAccount(pKey as `0x${string}`);\n    const client = createWalletClient({\n      account,\n      chain: baseSepolia,\n      transport: http(),\n    }).extend(publicActions);\n\n    console.log(`Faucet request for: ${address}`);\n\n    // 1. Send ETH (0.005 ETH) for gas\n    const ethHash = await client.sendTransaction({\n      to: address,\n      value: parseEther(\"0.005\"),\n    });\n    console.log(`Sent ETH: ${ethHash}`);\n\n    // 2. Send USDC (50 USDC)\n    const { request } = await client.simulateContract({\n      address: USDC_ADDRESS,\n      abi: ERC20_ABI,\n      functionName: 'transfer',\n      args: [address, parseUnits(\"50\", 6)], // USDC has 6 decimals\n    });\n    const usdcHash = await client.writeContract(request);\n    console.log(`Sent USDC: ${usdcHash}`);\n\n    return NextResponse.json({\n      success: true,\n      txHashes: {\n        eth: ethHash,\n        usdc: usdcHash\n      },\n      message: \"Sent 0.005 ETH and 50 USDC\"\n    });\n  } catch (error: any) {\n    console.error(\"Faucet Error:\", error);\n    return NextResponse.json({ error: error.message || \"Internal Server Error\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;AAEA,MAAM,eAAe;AACrB,MAAM,YAAY;IAChB;QACE,QAAQ;YACN;gBAAE,MAAM;gBAAM,MAAM;YAAU;YAC9B;gBAAE,MAAM;gBAAU,MAAM;YAAU;SACnC;QACD,MAAM;QACN,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAO;SAAE;QACrC,iBAAiB;QACjB,MAAM;IACR;CACD;AAEM,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAI,IAAI;QAElC,IAAI,CAAC,SAAS;YACZ,OAAO,sKAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,MAAM,OAAO,QAAQ,GAAG,CAAC,kBAAkB;QAC3C,IAAI,CAAC,MAAM;YACT,QAAQ,KAAK,CAAC;YACd,OAAO,sKAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,sBAAsB;QACtB,MAAM,UAAU,IAAA,8MAAmB,EAAC;QACpC,MAAM,SAAS,IAAA,2MAAkB,EAAC;YAChC;YACA,OAAO,2MAAW;YAClB,WAAW,IAAA,6LAAI;QACjB,GAAG,MAAM,CAAC,wMAAa;QAEvB,QAAQ,GAAG,CAAC,CAAC,oBAAoB,EAAE,SAAS;QAE5C,kCAAkC;QAClC,MAAM,UAAU,MAAM,OAAO,eAAe,CAAC;YAC3C,IAAI;YACJ,OAAO,IAAA,iMAAU,EAAC;QACpB;QACA,QAAQ,GAAG,CAAC,CAAC,UAAU,EAAE,SAAS;QAElC,yBAAyB;QACzB,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,OAAO,gBAAgB,CAAC;YAChD,SAAS;YACT,KAAK;YACL,cAAc;YACd,MAAM;gBAAC;gBAAS,IAAA,iMAAU,EAAC,MAAM;aAAG;QACtC;QACA,MAAM,WAAW,MAAM,OAAO,aAAa,CAAC;QAC5C,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,UAAU;QAEpC,OAAO,sKAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,UAAU;gBACR,KAAK;gBACL,MAAM;YACR;YACA,SAAS;QACX;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO,IAAI;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC9F;AACF"}}]
}