(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,135439,e=>{"use strict";var n,t,a,i,s,r,o,c,l,d=e.i(531871),u=e.i(619441),g=e.i(467174),h=e.i(319898),p=e.i(573250),A=e.i(721866),f=e.i(748793),m=e.i(403173),v=e.i(461358),w=e.i(274636),y=e.i(108351),T=e.i(872863),b=e.i(851637),S=e.i(830073),I=e.i(539285),E=e.i(496655),W=e.i(119376),C=e.i(666089),O=e.i(178171),M=e.i(926485),j=e.i(856298),U=e.i(866283),P=e.i(533841),N=e.i(569269),F=e.i(737281),x=e.i(891548),_=e.i(237446),k=e.i(493617),D=e.i(858363);let L=["solana:mainnet","solana:devnet","solana:testnet"];function B(e,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw TypeError("attempted to use private field on non-instance");return e}var z=0,R="__private_"+z+++"__implementation";function V(e,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw TypeError("attempted to use private field on non-instance");return e}var G=0;function Q(e){return"__private_"+G+++"_"+e}var K=Q("_address"),Y=Q("_publicKey"),J=Q("_chains"),H=Q("_features"),Z=Q("_label"),$=Q("_icon");class q{get address(){return V(this,K)[K]}get publicKey(){return V(this,Y)[Y].slice()}get chains(){return V(this,J)[J].slice()}get features(){return V(this,H)[H].slice()}get label(){return V(this,Z)[Z]}get icon(){return V(this,$)[$]}constructor({address:e,publicKey:n,label:t,icon:a}){Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),V(this,K)[K]=e,V(this,Y)[Y]=n,V(this,J)[J]=L,V(this,Z)[Z]=t,V(this,$)[$]=a,V(this,H)[H]=["solana:signAndSendTransaction","solana:signTransaction","solana:signMessage"],new.target===q&&Object.freeze(this)}}function X(e,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw TypeError("attempted to use private field on non-instance");return e}var ee=0;function en(e){return"__private_"+ee+++"_"+e}var et=en("_listeners"),ea=en("_version"),ei=en("_name"),es=en("_icon"),er=en("_injection"),eo=en("_isPrivyWallet"),ec=en("_accounts"),el=en("_on"),ed=en("_emit"),eu=en("_off"),eg=en("_connected"),eh=en("_connect"),ep=en("_disconnect"),eA=en("_signMessage"),ef=en("_signAndSendTransaction"),em=en("_signTransaction");function ev(e,...n){X(this,et)[et][e]?.forEach(e=>e.apply(null,n))}function ew(e,n){X(this,et)[et][e]=X(this,et)[et][e]?.filter(e=>n!==e)}function ey(){let{isHeadlessSigning:e,walletProxy:n,initializeWalletProxy:t,recoverEmbeddedWallet:a,openModal:i,privy:s,client:r}=(0,I.u)(),{user:o}=(0,P.u)(),{setModalData:c}=(0,E.a)(),{signWithUserSigner:l}=(0,_.u)();return{signMessage:({message:d,address:u,options:g})=>new Promise(async(h,p)=>{let A=(0,E.h)(o,u);if("privy"!==A?.walletClientType)return void p(new I.a("Wallet is not a Privy wallet",void 0,I.b.EMBEDDED_WALLET_NOT_FOUND));let{entropyId:f,entropyIdVerifier:m}=(0,N.g)(o,A),v=(0,E.d)(A),w=(0,D.b)(d).toString("base64");if(w.length<1)return void p(new I.a("Message must be a non-empty string",void 0,I.b.INVALID_MESSAGE));let y=async()=>{let e;if(!o)throw Error("User must be authenticated before signing with a Privy wallet");let i=await r.getAccessToken();if(!i)throw Error("User must be authenticated to use their embedded wallet.");let c=n??await t(15e3);if(!c)throw Error("Failed to initialize embedded wallet proxy.");if(!await a({address:A.address}))throw Error("Unable to connect to wallet");if(v){let n=await (0,j.rpc)(s,l,{chain_type:"solana",method:"signMessage",params:{message:w,encoding:"base64"},wallet_id:A.id});if(!n.data||!("signature"in n.data))throw Error("Failed to sign message");e=n.data.signature}else{let{response:n}=await c.rpc({accessToken:i,entropyId:f,entropyIdVerifier:m,chainType:"solana",hdWalletIndex:A.walletIndex??0,requesterAppId:g?.uiOptions?.requesterAppId,request:{method:"signMessage",params:{message:w}}});e=n.data.signature}return e};if(e({showWalletUIs:g?.uiOptions?.showWalletUIs}))try{let e=await y(),n=new Uint8Array((0,D.b)(e,"base64"));h({signature:n})}catch(e){p(e)}else c({signMessage:{method:"solana_signMessage",data:w,confirmAndSign:y,onSuccess:e=>{h({signature:new Uint8Array((0,D.b)(e,"base64"))})},onFailure:e=>{p(e)},uiOptions:g?.uiOptions??{}},connectWallet:{recoveryMethod:A.recoveryMethod,connectingWalletAddress:A.address,entropyId:f,entropyIdVerifier:m,isUnifiedWallet:v,onCompleteNavigateTo:"SignRequestScreen",onFailure:e=>{p(new I.a("Failed to connect to wallet",e,I.b.UNKNOWN_CONNECT_WALLET_ERROR))}}}),i("EmbeddedWalletConnectingScreen")})}}function eT(){let{isHeadlessSigning:e,openModal:n}=(0,I.u)(),{setModalData:t}=(0,E.a)(),{signMessage:a}=ey(),{user:i}=(0,P.u)();return{signTransaction:async({transaction:s,options:r,chain:o="solana:mainnet",address:c})=>{async function l(e){let n,t,{signature:i}=await a({message:(0,D.a)(e),address:c,options:{...r,uiOptions:{...r?.uiOptions,showWalletUIs:!1}}});return{signedTransaction:(n=structuredClone((0,C.getTransactionDecoder)().decode(e)),(t=(0,O.address)(c))in n.signatures&&(n.signatures[t]=i),new Uint8Array((0,C.getTransactionEncoder)().encode(n)))}}return e({showWalletUIs:r?.uiOptions?.showWalletUIs})?l(s):new Promise(async(e,a)=>{let d=(0,E.h)(i,c);if("privy"!==d?.walletClientType)return void a(new I.a("Wallet is not a Privy wallet",void 0,I.b.EMBEDDED_WALLET_NOT_FOUND));let{entropyId:u,entropyIdVerifier:g}=(0,N.g)(i,d),h=(0,E.d)(d);function p(e){return n=>{a(n instanceof I.a?n:new I.a("Failed to connect to wallet",n,e))}}let A={account:d,transaction:s,chain:o,signOnly:!0,uiOptions:r?.uiOptions||{},onConfirm:l,onSuccess:e,onFailure:p(I.b.TRANSACTION_FAILURE)};t({connectWallet:{recoveryMethod:d.recoveryMethod,connectingWalletAddress:d.address,entropyId:u,entropyIdVerifier:g,isUnifiedWallet:h,onCompleteNavigateTo:"StandardSignAndSendTransactionScreen",onFailure:p(I.b.UNKNOWN_CONNECT_WALLET_ERROR)},standardSignAndSendTransaction:A}),n("EmbeddedWalletConnectingScreen")})}}}let eb=new class extends F.default{setImplementation(e){B(this,R)[R]=e}async signMessage(e){return B(this,R)[R].signMessage(e)}async signAndSendTransaction(e){return B(this,R)[R].signAndSendTransaction(e)}async signTransaction(e){return B(this,R)[R].signTransaction(e)}constructor(e){super(),Object.defineProperty(this,R,{writable:!0,value:void 0}),B(this,R)[R]=e}}({signTransaction:(0,I.l)("signTransaction was not injected"),signAndSendTransaction:(0,I.l)("signAndSendTransaction was not injected"),signMessage:(0,I.l)("signMessage was not injected")}),eS=new class{get version(){return X(this,ea)[ea]}get name(){return X(this,ei)[ei]}get icon(){return X(this,es)[es]}get chains(){return L.slice()}get features(){return{"standard:connect":{version:"1.0.0",connect:X(this,eh)[eh]},"standard:disconnect":{version:"1.0.0",disconnect:X(this,ep)[ep]},"standard:events":{version:"1.0.0",on:X(this,el)[el]},"solana:signAndSendTransaction":{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:X(this,ef)[ef]},"solana:signTransaction":{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:X(this,em)[em]},"solana:signMessage":{version:"1.0.0",signMessage:X(this,eA)[eA]},"privy:":{privy:{signMessage:X(this,er)[er].signMessage,signTransaction:X(this,er)[er].signTransaction,signAndSendTransaction:X(this,er)[er].signAndSendTransaction}}}}get accounts(){return X(this,ec)[ec].slice()}get isPrivyWallet(){return X(this,eo)[eo]}constructor({name:e,icon:n,version:t,injection:a,wallets:i}){Object.defineProperty(this,ed,{value:ev}),Object.defineProperty(this,eu,{value:ew}),Object.defineProperty(this,et,{writable:!0,value:void 0}),Object.defineProperty(this,ea,{writable:!0,value:void 0}),Object.defineProperty(this,ei,{writable:!0,value:void 0}),Object.defineProperty(this,es,{writable:!0,value:void 0}),Object.defineProperty(this,er,{writable:!0,value:void 0}),Object.defineProperty(this,eo,{writable:!0,value:void 0}),Object.defineProperty(this,ec,{writable:!0,value:void 0}),Object.defineProperty(this,el,{writable:!0,value:void 0}),Object.defineProperty(this,eg,{writable:!0,value:void 0}),Object.defineProperty(this,eh,{writable:!0,value:void 0}),Object.defineProperty(this,ep,{writable:!0,value:void 0}),Object.defineProperty(this,eA,{writable:!0,value:void 0}),Object.defineProperty(this,ef,{writable:!0,value:void 0}),Object.defineProperty(this,em,{writable:!0,value:void 0}),X(this,et)[et]={},X(this,el)[el]=(e,n)=>(X(this,et)[et][e]?.push(n)||(X(this,et)[et][e]=[n]),()=>X(this,eu)[eu](e,n)),X(this,eg)[eg]=e=>{null!=e&&(X(this,ec)[ec]=e.map(({address:e})=>new q({address:e,publicKey:x.base58.decode(e)}))),X(this,ed)[ed]("change",{accounts:this.accounts})},X(this,eh)[eh]=async()=>(X(this,ed)[ed]("change",{accounts:this.accounts}),{accounts:this.accounts}),X(this,ep)[ep]=async()=>{X(this,ed)[ed]("change",{accounts:this.accounts})},X(this,eA)[eA]=async(...e)=>{let n=[];for(let{account:t,...a}of e){let{signature:e}=await X(this,er)[er].signMessage({...a,address:t.address});n.push({signedMessage:a.message,signature:e})}return n},X(this,ef)[ef]=async(...e)=>{let n=[];for(let t of e){let{signature:e}=await X(this,er)[er].signAndSendTransaction({...t,transaction:t.transaction,address:t.account.address,chain:t.chain||"solana:mainnet",options:t.options});n.push({signature:e})}return n},X(this,em)[em]=async(...e)=>{let n=[];for(let{transaction:t,account:a,options:i,chain:s}of e){let{signedTransaction:e}=await X(this,er)[er].signTransaction({transaction:t,address:a.address,chain:s||"solana:mainnet",options:i});n.push({signedTransaction:e})}return n},X(this,ei)[ei]=e,X(this,es)[es]=n,X(this,ea)[ea]=t,X(this,er)[er]=a,X(this,ec)[ec]=[],X(this,eo)[eo]=!0,a.on("accountChanged",X(this,eg)[eg],this),X(this,eg)[eg](i)}}({name:"Privy",version:"1.0.0",icon:"data:image/png;base64,AAABAAEAFBQAAAAAIABlAQAAFgAAAIlQTkcNChoKAAAADUlIRFIAAAAUAAAAFAgGAAAAjYkdDQAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAQVJREFUeJxiYMANZIC4E4ivAPFPIP4FxDeAuB+IlfDowwBMQFwJxF+B+D8O/AOI66Bq8QJGIF6ExyB0vAqImfEZmEeCYTDcgMswPiB+T4aB34FYApuBsWQYBsP52AycToGBK7EZuJECAw9jM3AVBQbuwWZgIwUGTsZmoDkFBnpiMxAEjpJh2FV8iVsbiD+TYBgoDVrgMgwGnID4HRGGgTKBGyHDYEAaiBdCSxh0g/5AU4Q8sYYhAzEgjoGmABBOgFo2eACowFABYn0oVgViAVINkQTiZUD8DIj/ATF6GILEXgLxCiCWIsZAbiAuBeKtQHwHiEHJ6C8UfwHie0C8E4jLoWpRAAAAAP//rcbhsQAAAAZJREFUAwBYFs3VKJ0cuQAAAABJRU5ErkJggg==",wallets:[],injection:eb});var eI=e.i(365749),eE=e.i(888251);e.i(427217);var eW=e.i(54624),eC=e.i(417193),eO=e.i(743947);e.i(331210),e.i(723118);var eM=e.i(978516);function ej(e){return"signTransactions"in e&&"function"==typeof e.signTransactions||"modifyAndSignTransactions"in e&&"function"==typeof e.modifyAndSignTransactions||"signAndSendTransactions"in e&&"function"==typeof e.signAndSendTransactions}function eU(e,n){Object.freeze(e);let t={...n,feePayer:e};return Object.freeze(t),t}e.i(806675);var eP=((n=eP||{})[n.Uninitialized=0]="Uninitialized",n[n.Initialized=1]="Initialized",n),eN=((t=eN||{})[t.Legacy=0]="Legacy",t[t.Current=1]="Current",t),eF=((a=eF||{})[a.Nonce=0]="Nonce",a),ex=((i=ex||{})[i.CreateAccount=0]="CreateAccount",i[i.Assign=1]="Assign",i[i.TransferSol=2]="TransferSol",i[i.CreateAccountWithSeed=3]="CreateAccountWithSeed",i[i.AdvanceNonceAccount=4]="AdvanceNonceAccount",i[i.WithdrawNonceAccount=5]="WithdrawNonceAccount",i[i.InitializeNonceAccount=6]="InitializeNonceAccount",i[i.AuthorizeNonceAccount=7]="AuthorizeNonceAccount",i[i.Allocate=8]="Allocate",i[i.AllocateWithSeed=9]="AllocateWithSeed",i[i.AssignWithSeed=10]="AssignWithSeed",i[i.TransferSolWithSeed=11]="TransferSolWithSeed",i[i.UpgradeNonceAccount=12]="UpgradeNonceAccount",i);function e_(e){return!!e&&"object"==typeof e&&"address"in e&&ej(e)}var ek=e.i(989581),eD=e.i(885758),eL=((s=eL||{})[s.Uninitialized=0]="Uninitialized",s[s.Initialized=1]="Initialized",s[s.Frozen=2]="Frozen",s),eB=((r=eB||{})[r.MintTokens=0]="MintTokens",r[r.FreezeAccount=1]="FreezeAccount",r[r.AccountOwner=2]="AccountOwner",r[r.CloseAccount=3]="CloseAccount",r),ez=((o=ez||{})[o.CreateAssociatedToken=0]="CreateAssociatedToken",o[o.CreateAssociatedTokenIdempotent=1]="CreateAssociatedTokenIdempotent",o[o.RecoverNestedAssociatedToken=2]="RecoverNestedAssociatedToken",o),eR=((c=eR||{})[c.Mint=0]="Mint",c[c.Token=1]="Token",c[c.Multisig=2]="Multisig",c),eV=((l=eV||{})[l.InitializeMint=0]="InitializeMint",l[l.InitializeAccount=1]="InitializeAccount",l[l.InitializeMultisig=2]="InitializeMultisig",l[l.Transfer=3]="Transfer",l[l.Approve=4]="Approve",l[l.Revoke=5]="Revoke",l[l.SetAuthority=6]="SetAuthority",l[l.MintTo=7]="MintTo",l[l.Burn=8]="Burn",l[l.CloseAccount=9]="CloseAccount",l[l.FreezeAccount=10]="FreezeAccount",l[l.ThawAccount=11]="ThawAccount",l[l.TransferChecked=12]="TransferChecked",l[l.ApproveChecked=13]="ApproveChecked",l[l.MintToChecked=14]="MintToChecked",l[l.BurnChecked=15]="BurnChecked",l[l.InitializeAccount2=16]="InitializeAccount2",l[l.SyncNative=17]="SyncNative",l[l.InitializeAccount3=18]="InitializeAccount3",l[l.InitializeMultisig2=19]="InitializeMultisig2",l[l.InitializeMint2=20]="InitializeMint2",l[l.GetAccountDataSize=21]="GetAccountDataSize",l[l.InitializeImmutableOwner=22]="InitializeImmutableOwner",l[l.AmountToUiAmount=23]="AmountToUiAmount",l[l.UiAmountToAmount=24]="UiAmountToAmount",l);function eG(e,n){return n=>{if(!n.value)return Object.freeze({address:e,role:eM.AccountRole.READONLY});let t=n.isWritable?eM.AccountRole.WRITABLE:eM.AccountRole.READONLY;return Object.freeze({address:function(e){if(!e)throw Error("Expected a Address.");return"object"==typeof e&&"address"in e?e.address:Array.isArray(e)?e[0]:e}(n.value),role:eQ(n.value)?(0,eM.upgradeRoleToSigner)(t):t,...eQ(n.value)?{signer:n.value}:{}})}}function eQ(e){return!!e&&"object"==typeof e&&"address"in e&&ej(e)}async function eK(e,n={}){let{programAddress:t="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}=n;return await (0,O.getProgramDerivedAddress)({programAddress:t,seeds:[(0,O.getAddressEncoder)().encode(e.owner),(0,O.getAddressEncoder)().encode(e.tokenProgram),(0,O.getAddressEncoder)().encode(e.mint)]})}var eY=e.i(949408),eJ=e.i(430365),eH=e.i(498257);function eZ({rows:e}){return(0,d.jsx)(b.a,{children:e.filter(e=>!!e).map((e,n)=>null!=e.value||e.isLoading?(0,d.jsxs)(b.R,{children:[(0,d.jsx)(T.L,{children:e.label}),(0,d.jsx)(T.V,{$isLoading:e.isLoading,children:e.value})]},n):null)})}function e$(e){return BigInt(Math.floor(1e9*parseFloat(e)))}function eq(e){return+eX.format(parseFloat(e.toString())/1e9)}e.i(840711),e.i(827121);let eX=Intl.NumberFormat(void 0,{maximumFractionDigits:8});async function e0({tx:e,solanaClient:n,amount:t,asset:a,tokenPrice:i}){if(!e)return null;if("SOL"===a&&i){let a=e$(t),s=(0,eY.g)(a,i),r=await (0,D.f)({solanaClient:n,tx:e});return{amountInUsd:s,feeInUsd:i?(0,eY.g)(r,i):void 0,totalInUsd:(0,eY.g)(a+r,i)}}if("USDC"===a&&i){let a,s="$"+t,r=await (0,D.f)({solanaClient:n,tx:e}),o=(a=parseFloat(r.toString())/eY.L*i)<.01?0:a;return{amountInUsd:s,feeInUsd:(0,eY.g)(r,i),totalInUsd:"$"+(parseFloat(t)+o).toFixed(2)}}if("SOL"===a){let a=e$(t),i=await (0,D.f)({solanaClient:n,tx:e});return{amountInSol:t+" SOL",feeInSol:eq(i)+" SOL",totalInSol:eq(a+i)+" SOL"}}return{amountInUsdc:t+" USDC",feeInSol:eq(await (0,D.f)({solanaClient:n,tx:e}))+" SOL"}}let e1={component:function(){let e=(0,S.u)(),{closePrivyModal:n,createAnalyticsEvent:t}=(0,I.u)(),{data:a,setModalData:i,navigate:s}=(0,E.a)(),{wallets:r}=function(){let{ready:e,wallets:n}=function(){let{client:e}=(0,I.u)(),{ready:n,wallet:t}=function(){let{ready:e}=(0,N.u)(),{user:n}=(0,P.u)(),{signMessage:t}=ey(),{signTransaction:a}=eT(),{signAndSendTransaction:i}=function(){let e=(0,S.u)(),{isHeadlessSigning:n,openModal:t}=(0,I.u)(),{setModalData:a}=(0,E.a)(),{signTransaction:i}=eT(),s=(0,D.u)(),{user:r}=(0,P.u)(),{signWithUserSigner:o}=(0,_.u)();return{signAndSendTransaction:async({transaction:c,address:l,chain:d="solana:mainnet",options:u})=>{let g=(0,E.h)(r,l);if("privy"!==g?.walletClientType)throw new I.a("Wallet is not a Privy wallet",void 0,I.b.EMBEDDED_WALLET_NOT_FOUND);let h=(0,E.d)(g);async function p(n){if(u?.sponsor)return await (async n=>{if(!h)throw new I.a("Sponsoring transactions is only supported for wallets on the TEE stack",I.b.INVALID_DATA);let t=new M.default({appId:e.id,clientId:e.appClientId,storage:k.u}),a=await (0,j.rpc)(t,o,{chain_type:"solana",method:"signAndSendTransaction",sponsor:!0,params:{transaction:(0,D.b)(n).toString("base64"),encoding:"base64"},caip2:`solana:${(await s(d).rpc.getGenesisHash().send()).substring(0,32)}`,wallet_id:g.id});if(a.data&&"hash"in a.data)return{signature:x.base58.decode(a.data.hash)};throw Error("Failed to sign and send transaction")})(n);let{signedTransaction:t}=await i({transaction:n,address:l,chain:d,options:{...u,uiOptions:{...u?.uiOptions,showWalletUIs:!1}}}),{signature:a}=await s(d).sendAndConfirmTransaction(t);return{signature:a}}return n({showWalletUIs:u?.uiOptions?.showWalletUIs})?p(c):new Promise(async(n,i)=>{let s,o,{entropyId:A,entropyIdVerifier:f}=(0,N.g)(r,g);function m(e){return n=>{i(n instanceof I.a?n:new I.a("Failed to connect to wallet",n,e))}}let v={account:g,transaction:c,chain:d,signOnly:!1,uiOptions:u?.uiOptions||{},onConfirm:p,onSuccess:n,onFailure:m(I.b.TRANSACTION_FAILURE),isSponsored:!!u?.sponsor},w={recoveryMethod:g.recoveryMethod,connectingWalletAddress:g.address,entropyId:A,entropyIdVerifier:f,isUnifiedWallet:h,onCompleteNavigateTo:"StandardSignAndSendTransactionScreen",onFailure:m(I.b.UNKNOWN_CONNECT_WALLET_ERROR)};e.fundingConfig&&(s=(0,k.g)({address:l,appConfig:e,methodScreen:"FundingMethodSelectionScreen",fundWalletConfig:{...u,asset:"native-currency",chain:d},externalSolanaFundingScreen:"FundSolWalletWithExternalSolanaWallet"}),o={amount:e.fundingConfig.defaultRecommendedAmount,asset:"SOL",chain:d,destinationAddress:l,afterSuccessScreen:"StandardSignAndSendTransactionScreen",sourceWalletData:void 0}),a({connectWallet:w,standardSignAndSendTransaction:v,funding:s,solanaFundingData:o}),t("EmbeddedWalletConnectingScreen")})}}}(),s=(0,g.useMemo)(()=>{let e=[...(0,E.o)(n).sort((e,n)=>(e.walletIndex??0)-(n.walletIndex??0))],t=(0,E.j)(n);return t.length?[...e,...t]:e},[n]),r=(0,g.useMemo)(()=>({signMessage:async({message:e,address:n,options:a})=>await t({message:e,address:n,options:a}),signTransaction:async({transaction:e,address:n,chain:t,options:i})=>await a({transaction:e,address:n,chain:t,options:i}),async signAndSendTransaction({transaction:e,address:n,chain:t,options:a}){let{signature:s}=await i({transaction:e,address:n,chain:t,options:a});return{signature:s}}}),[t,a,i]);return(0,g.useEffect)(()=>{eb?.setImplementation(r)},[r]),(0,g.useEffect)(()=>{var n;!e||(n=eS.accounts).length===s.length&&n.every((e,n)=>e.address===s[n]?.address)||eb?.emit("accountChanged",s)},[e,s]),{ready:e,wallet:eS}}(),[a,i]=(0,g.useState)([]),[s,r]=(0,g.useState)([]);return(0,g.useEffect)(()=>{let e=[t,...a.filter(e=>"solana"===e.chainType&&!!e.wallet.features).map(e=>e.wallet)];r(e);let n=a.flatMap(n=>{let t=()=>r([...e]);return n.on("walletsUpdated",t),{connector:n,off:t}}),i=e.map(n=>n.features["standard:events"]?.on("change",()=>{r([...e])}));return()=>{i.forEach(e=>e?.()),n.forEach(({connector:e,off:n})=>e.off("walletsUpdated",n))}},[a]),(0,g.useEffect)(()=>{i(e.connectors?.walletConnectors.filter(e=>"solana"===e.chainType)??[]);let n=()=>{i(e.connectors?.walletConnectors.filter(e=>"solana"===e.chainType)??[])};return e.connectors?.on("connectorInitialized",n),()=>{e.connectors?.off("connectorInitialized",n)}},[n,e.connectors]),{ready:n,wallets:s}}();return{ready:e,wallets:(0,g.useMemo)(()=>n.flatMap(e=>e.accounts.map(n=>new U.ConnectedStandardSolanaWallet({wallet:e,account:n}))),[n])}}(),[o,c]=(0,g.useState)("preparing"),[l,T]=(0,g.useState)(),[b,O]=(0,g.useState)(),[F,L]=(0,g.useState)();if(!a?.solanaFundingData)throw Error("Funding config is missing");if(!a.solanaFundingData.sourceWalletData)throw Error("Funding config is missing source wallet data");let{amount:B,asset:z,chain:R,sourceWalletData:V,destinationAddress:G,afterSuccessScreen:Q}=a.solanaFundingData,K=r.find(e=>e.address===V.address&&(0,k.t)(V.walletClientType)===(0,k.t)(e.standardWallet.name)),Y=(0,D.u)()(R),{tokenPrice:J,isTokenPriceLoading:H}=(0,eI.u)("solana");return(0,g.useEffect)(()=>{if("preparing"!==o||H||!K)return;let e="SOL"===z?e$(B):BigInt(Math.floor(1e6*parseFloat(B)));O({amount:("SOL"===z&&J?(0,eY.g)(e,J):B)??B}),("SOL"===z?async function({solanaClient:e,source:n,destination:t,amountInLamports:a}){let{value:i}=await e.rpc.getLatestBlockhash().send(),s={address:n},r=(0,ek.pipe)((0,eD.createTransactionMessage)({version:0}),e=>eU(s,e),e=>(0,eD.setTransactionMessageLifetimeUsingBlockhash)(i,e),e=>{var n;let i,r,o,c;return(0,eD.appendTransactionMessageInstruction)((i=(void 0)??"11111111111111111111111111111111",r={source:{value:(n={amount:a,source:s,destination:t}).source??null,isWritable:!0},destination:{value:n.destination??null,isWritable:!0}},o={...n},{accounts:[(c=e=>{if(!e.value)return;let n=e.isWritable?eM.AccountRole.WRITABLE:eM.AccountRole.READONLY;return Object.freeze({address:function(e){if(!e)throw Error("Expected a Address.");return"object"==typeof e&&"address"in e?e.address:Array.isArray(e)?e[0]:e}(e.value),role:e_(e.value)?(0,eM.upgradeRoleToSigner)(n):n,...e_(e.value)?{signer:e.value}:{}})})(r.source),c(r.destination)],programAddress:i,data:(0,eO.transformEncoder)((0,eW.getStructEncoder)([["discriminator",(0,eC.getU32Encoder)()],["amount",(0,eC.getU64Encoder)()]]),e=>({...e,discriminator:2})).encode(o)}),e)},e=>(0,C.compileTransaction)(e));return new Uint8Array((0,C.getTransactionEncoder)().encode(r))}({solanaClient:Y,source:K.address,destination:G,amountInLamports:e}):async function({solanaClient:e,source:n,destination:t,amountInBaseUnits:a}){var i;let s,r,o,c=(0,eJ.g)(e.chain),{value:l}=await e.rpc.getLatestBlockhash().send(),d={address:n},[u]=await eK({mint:c,owner:n,tokenProgram:eY.T}),[g]=await eK({mint:c,owner:t,tokenProgram:eY.T}),[h,p]=await Promise.all([e.rpc.getAccountInfo(u,{commitment:"confirmed",encoding:"jsonParsed"}).send().catch(()=>null),e.rpc.getAccountInfo(g,{commitment:"confirmed",encoding:"jsonParsed"}).send().catch(()=>null)]);if(!h?.value)throw Error(`Source token account does not exist for address: ${n}`);let A=(s=(void 0)??"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",(r={payer:{value:(i={payer:d,ata:g,owner:t,mint:c}).payer??null,isWritable:!0},ata:{value:i.ata??null,isWritable:!0},owner:{value:i.owner??null,isWritable:!1},mint:{value:i.mint??null,isWritable:!1},systemProgram:{value:i.systemProgram??null,isWritable:!1},tokenProgram:{value:i.tokenProgram??null,isWritable:!1}}).tokenProgram.value||(r.tokenProgram.value="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.systemProgram.value||(r.systemProgram.value="11111111111111111111111111111111"),{accounts:[(o=eG(s))(r.payer),o(r.ata),o(r.owner),o(r.mint),o(r.systemProgram),o(r.tokenProgram)],programAddress:s,data:(0,eO.transformEncoder)((0,eW.getStructEncoder)([["discriminator",(0,eC.getU8Encoder)()]]),e=>({...e,discriminator:1})).encode({})}),f=(0,ek.pipe)((0,eD.createTransactionMessage)({version:0}),e=>eU(d,e),e=>(0,eD.setTransactionMessageLifetimeUsingBlockhash)(l,e),e=>p?.value?e:(0,eD.appendTransactionMessageInstruction)(A,e),e=>{var n;let t,i,s,r,o;return(0,eD.appendTransactionMessageInstruction)((t=(void 0)??"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",i={source:{value:(n={source:u,destination:g,authority:d,amount:a}).source??null,isWritable:!0},destination:{value:n.destination??null,isWritable:!0},authority:{value:n.authority??null,isWritable:!1}},r=((s={...n}).multiSigners??[]).map(e=>({address:e.address,role:eM.AccountRole.READONLY_SIGNER,signer:e})),{accounts:[(o=eG(t))(i.source),o(i.destination),o(i.authority),...r],programAddress:t,data:(0,eO.transformEncoder)((0,eW.getStructEncoder)([["discriminator",(0,eC.getU8Encoder)()],["amount",(0,eC.getU64Encoder)()]]),e=>({...e,discriminator:3})).encode(s)}),e)},e=>(0,C.compileTransaction)(e));return new Uint8Array((0,C.getTransactionEncoder)().encode(f))}({solanaClient:Y,source:K.address,destination:G,amountInBaseUnits:e})).then(T).catch(e=>{c("error"),L(e)})},[o,B,z,R,K,G,H,J]),(0,g.useEffect)(()=>{"preparing"===o&&l&&e0({tx:l,solanaClient:Y,amount:B,asset:z,tokenPrice:J}).then(e=>{c("loaded"),O({amount:e?.amountInUsd??e?.amountInUsdc??e?.amountInSol??B,fee:e?.feeInUsd??e?.feeInSol,total:e?.totalInUsd??e?.totalInSol})}).catch(e=>{c("error"),L(e)})},[l,B,z,o,J]),(0,g.useEffect)(()=>{"error"===o&&F&&(i({errorModalData:{error:F,previousScreen:"FundSolWalletWithExternalSolanaWallet"},solanaFundingData:a.solanaFundingData}),s("ErrorScreen",!1))},[o,s]),(0,g.useEffect)(()=>{if("success"!==o)return;let e=setTimeout(Q?()=>s(Q):n,S.t);return()=>clearTimeout(e)},[o]),(0,d.jsxs)(d.Fragment,"success"===o?{children:[(0,d.jsx)(v.t,{}),(0,d.jsx)(A.b,{}),(0,d.jsxs)(A.c,{children:[(0,d.jsx)(u.default,{color:"var(--privy-color-success)",width:"64px",height:"64px"}),(0,d.jsx)(m.C,{title:"Success!",description:`Youâ€™ve successfully added ${B} ${z} to your ${e.name} wallet. It may take a minute before the funds are available to use.`})]}),(0,d.jsx)(A.R,{}),(0,d.jsx)(f.B,{})]}:"preparing"===o||"loaded"===o||"sending"===o?{children:[(0,d.jsx)(v.t,{}),(0,d.jsx)(A.e,{style:{marginTop:"16px"},children:(0,d.jsx)(w.I,{icon:K?.standardWallet.icon,name:K?.standardWallet.name})}),(0,d.jsx)(m.C,{style:{marginTop:"8px",marginBottom:"12px"},title:"sending"===o&&K?`Confirming with ${K.standardWallet.name}`:"Confirm transaction"}),(0,d.jsx)(eZ,{rows:[{label:"Source",value:(0,h.formatWalletAddress)(V.address)},{label:"Destination",value:(0,h.formatWalletAddress)(G)},{label:"Network",value:(0,eH.g)(R)},{label:"Amount",value:b?.amount,isLoading:"preparing"===o},{label:"Estimated fee",value:b?.fee,isLoading:"preparing"===o},{label:"Total",value:b?.total,isLoading:"preparing"===o}]}),(0,d.jsx)(p.P,{style:{marginTop:"1rem"},loading:"preparing"===o||"sending"===o,onClick:function(){"loaded"===o&&l&&K&&(c("sending"),(async function({transaction:e,chain:n,sourceWallet:t,solanaClient:a}){var i;let{hasFunds:s}=await (0,D.s)({solanaClient:a,tx:e});if(!s)throw new I.a(`Wallet ${(0,h.formatWalletAddress)(t.address)} does not have enough funds.`,void 0,I.b.INSUFFICIENT_BALANCE);let r=(i=(await t.signAndSendTransaction({transaction:e,chain:n}).catch(e=>{throw new I.a("Transaction was rejected by the user",e,I.b.TRANSACTION_FAILURE)})).signature,(0,W.getBase58Decoder)().decode(i));return await (0,D.w)({rpcSubscriptions:a.rpcSubscriptions,signature:r,timeout:2e4}),r})({solanaClient:Y,transaction:l,chain:R,sourceWallet:K}).then(e=>{c("success"),t({eventName:eE.O,payload:{provider:"external",status:"success",txHash:e,address:K.address,value:B,chainType:"solana",clusterName:R,token:z,destinationAddress:G,destinationValue:B,destinationChainType:"solana",destinationClusterName:R,destinationToken:z}})}).catch(e=>{c("error"),L(e)}))},children:"Confirm"}),(0,d.jsx)(f.B,{})]}:{children:[(0,d.jsx)(v.t,{}),(0,d.jsx)(y.N,{}),(0,d.jsx)("div",{style:{marginTop:"1rem"}}),(0,d.jsx)(f.B,{})]})}};e.s(["FundSolWalletWithExternalSolanaWallet",()=>e1,"default",()=>e1],135439)}]);